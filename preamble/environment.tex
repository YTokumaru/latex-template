\usepackage{tcolorbox}
\tcbuselibrary{theorems}

% 使う色を定義
\definecolor{proposition}{rgb}{0.53, 0.18, 0.09}
\definecolor{definition}{rgb}{0.0, 0.5, 0.0}
\definecolor{theorem}{rgb}{0.82, 0.41, 0.12}
\definecolor{corollary}{rgb}{0.5, 0.0, 0.13}
\definecolor{lemma}{rgb}{0.82, 0.71, 0.55}
\definecolor{eg}{rgb}{0.5, 0.5, 0.5}

%　boxの共通部分の設定
\tcbset{prefab/.style={
            enhanced,
            coltitle=white,
            fonttitle=\gtfamily\sffamily\bfseries\upshape,
            fontupper=\gtfamily\sffamily,
            fontlower=\gtfamily\sffamily,
            boxrule=0pt,
            sharp corners,
            breakable,
            before skip=8pt,
            after skip=10pt,
            top=10pt,
            middle = 10pt,
            bottom = 10pt,
        }}

% theorem環境
\newtcbtheorem[number within=section]{theorem}{定理}%
{
    prefab,
    colframe=theorem,
    colback=theorem!2!white,
    borderline west={4pt}{-4pt}{theorem},
    before lower=\(\because\quad\)
}{thm}

% proposition環境
\newtcbtheorem[number within=section]{proposition}{命題}%
{
    prefab,
    colframe=proposition,
    colback=proposition!2!white,
    borderline west={4pt}{-4pt}{proposition},
    before lower=\(\because\quad\)
}{prop}

% corollary環境
\newtcbtheorem[number within=section]{corollary}{系}%
{
    prefab,
    colframe=corollary,
    colback=corollary!2!white,
    borderline west={4pt}{-4pt}{corollary},
    before lower=\(\because\quad\)
}{cor}

% lemma環境
\newtcbtheorem[number within=section]{lemma}{補題}%
{
    prefab,
    colframe=lemma,
    colback=lemma!2!white,
    borderline west={4pt}{-4pt}{lemma},
    before lower=\(\because\quad\)
}{lem}

% definition環境
\newtcbtheorem[number within=section]{definition}{定義}%
{
    prefab,
    colframe=definition,
    colback=definition!2!white,
    borderline west={4pt}{-4pt}{definition},
    % before lower=\(\because\quad\)
}{def}

% eg環境
\newtcbtheorem[number within=section]{eg}{例}%
{
    prefab,
    colframe=eg,
    colback=eg!2!white,
    borderline west={4pt}{-4pt}{eg},
    before lower=解法:\\
}{eg}

% warning環境
\newtcolorbox{warning}[1][]{enhanced,
    before skip=2mm,after skip=3mm,fontupper=\gtfamily\sffamily,
    boxrule=0.4pt,left=5mm,right=2mm,top=1mm,bottom=1mm,
    colback=yellow!50,
    colframe=yellow!20!black,
    sharp corners,rounded corners=southeast,arc is angular,arc=3mm,
    underlay={%
            \path[fill=tcbcolback!80!black] ([yshift=3mm]interior.south east)--++(-0.4,-0.1)--++(0.1,-0.2);
            \path[draw=tcbcolframe,shorten <=-0.05mm,shorten >=-0.05mm] ([yshift=3mm]interior.south east)--++(-0.4,-0.1)--++(0.1,-0.2);
            \path[fill=yellow!50!black,draw=none] (interior.south west) rectangle node[white]{\Huge\bfseries !} ([xshift=5mm]interior.north west);
        },
    drop fuzzy shadow,#1}

% question環境
\newtcolorbox{question}[1][]{enhanced,
    before skip=2mm,after skip=3mm,fontupper=\gtfamily\sffamily,
    boxrule=0.4pt,left=5mm,right=2mm,top=1mm,bottom=1mm,
    colback=blue!20,
    colframe=blue!20!black,
    sharp corners,rounded corners=southeast,arc is angular,arc=3mm,
    underlay={%
            \path[fill=tcbcolback!80!black] ([yshift=3mm]interior.south east)--++(-0.4,-0.1)--++(0.1,-0.2);
            \path[draw=tcbcolframe,shorten <=-0.05mm,shorten >=-0.05mm] ([yshift=3mm]interior.south east)--++(-0.4,-0.1)--++(0.1,-0.2);
            \path[fill=blue!80!black,draw=none] (interior.south west) rectangle node[white]{\Huge\bfseries ?} ([xshift=5mm]interior.north west);
        },
    drop fuzzy shadow,#1}